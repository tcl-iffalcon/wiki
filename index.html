<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PluginHub</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #080c14;
            --surface: #0d1421;
            --surface2: #121929;
            --border: rgba(255,255,255,0.07);
            --text: #f0f4ff;
            --muted: #6b7a99;
            --accent: #3b82f6;
            --accent2: #10b981;
            --accent3: #f59e0b;
            --glow: rgba(59,130,246,0.15);
        }
        body.light {
            --bg: #f0f4fc;
            --surface: #ffffff;
            --surface2: #e8eef8;
            --border: rgba(0,0,0,0.08);
            --text: #0f172a;
            --muted: #64748b;
            --glow: rgba(59,130,246,0.08);
        }

        * { box-sizing: border-box; }

        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
            transition: background 0.3s, color 0.3s;
            overflow-x: hidden;
        }

        /* â”€â”€ BG GRID â”€â”€ */
        body::before {
            content: '';
            position: fixed; inset: 0;
            background-image:
                linear-gradient(rgba(59,130,246,0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(59,130,246,0.03) 1px, transparent 1px);
            background-size: 48px 48px;
            pointer-events: none; z-index: 0;
        }

        body.light::before {
            background-image:
                linear-gradient(rgba(59,130,246,0.05) 1px, transparent 1px),
                linear-gradient(90deg, rgba(59,130,246,0.05) 1px, transparent 1px);
        }

        main, nav, footer { position: relative; z-index: 1; }

        /* â”€â”€ FONTS â”€â”€ */

        /* â”€â”€ GLASS â”€â”€ */
        .glass {
            background: var(--surface);
            border: 1px solid var(--border);
            backdrop-filter: blur(16px);
        }

        /* â”€â”€ NAVBAR â”€â”€ */
        nav {
            position: sticky; top: 0; z-index: 100;
            background: rgba(8,12,20,0.85);
            border-bottom: 1px solid var(--border);
            backdrop-filter: blur(20px);
            padding: 0 24px;
        }
        body.light nav { background: rgba(240,244,252,0.9); }
        .nav-inner {
            max-width: 1200px; margin: 0 auto;
            height: 64px; display: flex; align-items: center; justify-content: space-between;
        }
        .brand {
            font-size: 22px; font-weight: 800; letter-spacing: -0.5px;
            background: linear-gradient(135deg, #60a5fa, #34d399);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            font-family: 'Plus Jakarta Sans', sans-serif;
        }
        .nav-links { display: flex; gap: 6px; align-items: center; }
        .nav-links a {
            font-size: 13px; font-weight: 500; color: var(--muted);
            text-decoration: none; padding: 6px 12px; border-radius: 8px;
            transition: color 0.2s, background 0.2s;
        }
        .nav-links a:hover { color: var(--text); background: var(--surface2); }
        .nav-btn {
            display: flex; align-items: center; gap-6px;
            padding: 7px 13px; border-radius: 10px; border: 1px solid var(--border);
            background: var(--surface2); color: var(--muted);
            font-size: 12px; font-weight: 700; cursor: pointer;
            transition: all 0.2s; gap: 6px;
        }
        .nav-btn:hover { color: var(--text); border-color: var(--accent); }
        .nav-btn.active { color: #ef4444; border-color: rgba(239,68,68,0.4); }

        /* â”€â”€ HERO â”€â”€ */
        .hero {
            text-align: center; padding: 72px 16px 56px;
            max-width: 700px; margin: 0 auto;
        }
        .hero-eyebrow {
            display: inline-flex; align-items: center; gap: 8px;
            font-size: 11px; font-weight: 700; letter-spacing: 2px; text-transform: uppercase;
            color: var(--accent); background: rgba(59,130,246,0.1);
            border: 1px solid rgba(59,130,246,0.25); border-radius: 999px;
            padding: 5px 14px; margin-bottom: 20px;
        }
        .hero h1 {
            font-size: clamp(36px, 6vw, 56px); font-weight: 800; line-height: 1.1;
            letter-spacing: -1.5px; margin-bottom: 16px;
        }
        .hero h1 span {
            background: linear-gradient(135deg, #60a5fa 0%, #34d399 50%, #a78bfa 100%);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }
        .hero p { font-size: 16px; color: var(--muted); max-width: 480px; margin: 0 auto 32px; line-height: 1.7; }

        /* â”€â”€ STATS BAR â”€â”€ */
        .stats-bar {
            display: flex; justify-content: center; gap: 40px;
            flex-wrap: wrap; margin-bottom: 0;
        }
        .stat { text-align: center; }
        .stat-num { font-size: 28px; font-weight: 800; color: var(--text); }
        .stat-label { font-size: 11px; color: var(--muted); font-weight: 500; text-transform: uppercase; letter-spacing: 1px; margin-top: 2px; }

        /* â”€â”€ SEARCH & FILTERS â”€â”€ */
        .filter-bar {
            max-width: 1200px; margin: 0 auto 32px; padding: 0 16px;
        }
        .filter-inner {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 20px;
            padding: 20px 24px;
            display: grid; grid-template-columns: 1fr 1fr 2fr; gap: 16px;
        }
        @media (max-width: 768px) {
            .filter-inner { grid-template-columns: 1fr; }
        }
        .filter-group label {
            display: block; font-size: 10px; font-weight: 700; text-transform: uppercase;
            letter-spacing: 1.5px; color: var(--muted); margin-bottom: 8px;
        }
        .filter-group select,
        .filter-group input {
            width: 100%; background: var(--surface2); border: 1px solid var(--border);
            color: var(--text); padding: 10px 14px; border-radius: 12px;
            font-size: 14px; font-family: 'DM Sans', sans-serif;
            outline: none; appearance: none; transition: border-color 0.2s;
        }
        .filter-group select:focus,
        .filter-group input:focus { border-color: var(--accent); }
        .filter-group input::placeholder { color: var(--muted); }

        /* â”€â”€ TABS (kategori pills) â”€â”€ */
        .category-tabs {
            max-width: 1200px; margin: 0 auto 24px;
            padding: 0 16px; display: flex; gap: 8px; flex-wrap: wrap; align-items: center;
        }
        .tab-pill {
            font-size: 12px; font-weight: 600; padding: 6px 14px;
            border-radius: 999px; border: 1px solid var(--border);
            background: var(--surface2); color: var(--muted);
            cursor: pointer; transition: all 0.2s; white-space: nowrap;
        }
        .tab-pill:hover { color: var(--text); border-color: rgba(255,255,255,0.2); }
        .tab-pill.active { background: var(--accent); color: #fff; border-color: var(--accent); }

        /* â”€â”€ RESULT INFO â”€â”€ */
        .result-bar {
            max-width: 1200px; margin: 0 auto 16px;
            padding: 0 16px; display: flex; justify-content: space-between; align-items: center;
        }
        .result-bar span { font-size: 13px; color: var(--muted); font-weight: 500; }

        /* â”€â”€ GRID â”€â”€ */
        .grid-wrap { max-width: 1200px; margin: 0 auto; padding: 0 16px 80px; }
        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 16px;
        }

        /* â”€â”€ CARD â”€â”€ */
        .plugin-card {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 18px;
            padding: 22px;
            display: flex; flex-direction: column;
            cursor: pointer;
            transition: transform 0.25s, border-color 0.25s, box-shadow 0.25s;
            animation: fadeUp 0.4s ease both;
            position: relative; overflow: hidden;
        }
        .plugin-card::before {
            content: '';
            position: absolute; inset: 0;
            background: radial-gradient(circle at 80% 20%, var(--glow), transparent 60%);
            opacity: 0; transition: opacity 0.3s;
            pointer-events: none;
        }
        .plugin-card:hover { transform: translateY(-3px); border-color: rgba(59,130,246,0.35); box-shadow: 0 12px 40px rgba(0,0,0,0.4); }
        .plugin-card:hover::before { opacity: 1; }

        @keyframes fadeUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* â”€â”€ SKELETON â”€â”€ */
        .skeleton-card {
            background: var(--surface); border: 1px solid var(--border);
            border-radius: 18px; padding: 22px; height: 180px;
            animation: shimmer 1.5s infinite;
        }
        .skel-line {
            height: 12px; border-radius: 6px;
            background: linear-gradient(90deg, var(--surface2) 25%, rgba(255,255,255,0.06) 50%, var(--surface2) 75%);
            background-size: 400% 100%;
            animation: shimmer 1.5s infinite;
            margin-bottom: 10px;
        }
        @keyframes shimmer {
            0% { background-position: 100% 0; }
            100% { background-position: -100% 0; }
        }

        /* â”€â”€ BADGE â”€â”€ */
        .badge {
            display: inline-block; font-size: 9px; font-weight: 800; text-transform: uppercase;
            letter-spacing: 0.8px; padding: 3px 8px; border-radius: 6px;
        }
        .badge-app { background: rgba(59,130,246,0.15); color: #60a5fa; }
        .badge-type { background: rgba(16,185,129,0.15); color: #34d399; }
        .badge-new { background: rgba(245,158,11,0.15); color: #fbbf24; animation: pulse-badge 2s infinite; }
        .badge-status-ok { background: rgba(16,185,129,0.15); color: #34d399; }
        .badge-status-warn { background: rgba(245,158,11,0.15); color: #fbbf24; }
        .badge-status-err { background: rgba(239,68,68,0.15); color: #f87171; }

        @keyframes pulse-badge {
            0%, 100% { opacity: 1; } 50% { opacity: 0.6; }
        }

        /* â”€â”€ FAV BUTTON â”€â”€ */
        .fav-btn {
            background: none; border: none; cursor: pointer;
            color: var(--muted); font-size: 18px; line-height: 1;
            transition: transform 0.2s, color 0.2s; padding: 2px;
        }
        .fav-btn:hover { transform: scale(1.3); }
        .fav-btn.active { color: #ef4444; }

        /* â”€â”€ RATING STARS â”€â”€ */
        .stars { display: flex; gap: 2px; }
        .star { font-size: 13px; cursor: pointer; color: var(--surface2); transition: color 0.15s; }
        .star.filled { color: #f59e0b; }
        .star:hover { color: #fbbf24; }

        /* â”€â”€ CARD ACTIONS â”€â”€ */
        .card-actions { display: flex; gap: 8px; margin-top: auto; padding-top: 16px; }
        .btn {
            flex: 1; padding: 9px 0; border-radius: 10px; border: none;
            font-size: 12px; font-weight: 700; cursor: pointer;
            transition: all 0.2s; font-family: 'DM Sans', sans-serif;
            text-align: center; text-decoration: none; display: flex; align-items: center; justify-content: center;
        }
        .btn-secondary { background: var(--surface2); color: var(--text); border: 1px solid var(--border); }
        .btn-secondary:hover { border-color: rgba(255,255,255,0.2); }
        .btn-primary { background: var(--accent); color: #fff; }
        .btn-primary:hover { background: #2563eb; }
        .btn-success { background: rgba(16,185,129,0.15); color: #34d399; border: 1px solid rgba(16,185,129,0.2); }

        /* â”€â”€ URL MONO â”€â”€ */
        .url-mono {
            font-size: 11px; font-family: 'SF Mono', 'Fira Code', monospace;
            background: var(--surface2); border: 1px solid var(--border);
            border-radius: 8px; padding: 8px 10px;
            color: var(--muted); overflow: hidden; text-overflow: ellipsis;
            white-space: nowrap; margin-top: 8px; margin-bottom: 0;
        }

        /* â”€â”€ LAST SEEN â”€â”€ */
        .last-seen-section {
            max-width: 1200px; margin: 0 auto 24px;
            padding: 0 16px;
        }
        .last-seen-title {
            font-size: 11px; font-weight: 700; text-transform: uppercase;
            letter-spacing: 1.5px; color: var(--muted); margin-bottom: 10px;
        }
        .last-seen-chips { display: flex; gap: 8px; flex-wrap: wrap; }
        .seen-chip {
            font-size: 12px; font-weight: 600; padding: 5px 12px;
            border-radius: 8px; background: var(--surface2); border: 1px solid var(--border);
            color: var(--text); cursor: pointer; transition: all 0.2s;
        }
        .seen-chip:hover { border-color: var(--accent); color: #60a5fa; }

        /* â”€â”€ TOAST â”€â”€ */
        #toast {
            position: fixed; bottom: 24px; left: 50%;
            transform: translateX(-50%) translateY(80px);
            padding: 10px 20px; border-radius: 999px;
            font-size: 13px; font-weight: 700; z-index: 9999;
            transition: transform 0.35s cubic-bezier(.34,1.56,.64,1), opacity 0.3s;
            opacity: 0; pointer-events: none; white-space: nowrap;
            background: #1e293b; border: 1px solid var(--border);
            box-shadow: 0 8px 32px rgba(0,0,0,0.4);
        }
        #toast.show { transform: translateX(-50%) translateY(0); opacity: 1; }

        /* â”€â”€ MODAL â”€â”€ */
        #modal-overlay {
            position: fixed; inset: 0; background: rgba(0,0,0,0.75);
            z-index: 1000; display: flex; align-items: center; justify-content: center;
            opacity: 0; pointer-events: none; transition: opacity 0.25s; padding: 16px;
            backdrop-filter: blur(4px);
        }
        #modal-overlay.open { opacity: 1; pointer-events: all; }
        #modal-box {
            background: var(--surface); border: 1px solid var(--border);
            border-radius: 24px; width: 100%; max-width: 580px; max-height: 88vh;
            overflow-y: auto; transform: scale(0.93) translateY(20px);
            transition: transform 0.3s cubic-bezier(.34,1.4,.64,1);
        }
        #modal-overlay.open #modal-box { transform: scale(1) translateY(0); }

        /* â”€â”€ STEP â”€â”€ */
        .step-num {
            min-width: 28px; height: 28px; display: flex; align-items: center; justify-content: center;
            border-radius: 50%; background: rgba(59,130,246,0.15); color: #60a5fa;
            font-size: 11px; font-weight: 800; flex-shrink: 0;
        }

        /* â”€â”€ EMPTY STATE â”€â”€ */
        #emptyState { display: none; text-align: center; padding: 80px 16px; color: var(--muted); }

        /* â”€â”€ MOBILE MENU â”€â”€ */
        #mobileMenu { display: none; }
        #mobileMenu.open { display: block; }

        /* â”€â”€ SCROLLBAR â”€â”€ */
        ::-webkit-scrollbar { width: 5px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: rgba(100,116,139,0.4); border-radius: 99px; }

        /* â”€â”€ ANNOUNCE BANNER â”€â”€ */
        .announce-bar {
            background: linear-gradient(135deg, rgba(59,130,246,0.1), rgba(16,185,129,0.1));
            border-bottom: 1px solid var(--border);
            padding: 8px 16px; text-align: center;
            font-size: 12px; color: var(--muted); font-weight: 500;
        }
        .announce-bar strong { color: var(--text); }

        /* â”€â”€ UPDATE INDICATOR â”€â”€ */
        .update-dot {
            display: inline-block; width: 6px; height: 6px; border-radius: 50%;
            background: #34d399; margin-right: 5px; vertical-align: middle;
            animation: pulse-dot 2s infinite;
        }
        @keyframes pulse-dot {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.5; transform: scale(1.5); }
        }



        /* Progress bar for loading */
        #progress-bar {
            position: fixed; top: 0; left: 0; height: 2px; width: 0%;
            background: linear-gradient(90deg, #3b82f6, #34d399);
            z-index: 9999; transition: width 0.3s ease;
        }

        /* â”€â”€ MOBILE â”€â”€ */
        @media (max-width: 640px) {
            .hero { padding: 40px 16px 32px; }
            .stats-bar { gap: 24px; }
            .stat-num { font-size: 22px; }
        }
    </style>
</head>
<body class="min-h-screen">

<!-- PROGRESS BAR -->
<div id="progress-bar"></div>

<!-- TOAST -->
<div id="toast"></div>

<!-- ANNOUNCE BANNER -->
<div class="announce-bar">
    <span class="update-dot"></span>
    <strong>PluginHub v2</strong> â€” Puanlama, son gÃ¶rÃ¼ntÃ¼lenenler ve karÅŸÄ±laÅŸtÄ±rma modu eklendi!
</div>

<!-- NAVBAR -->
<nav>
    <div class="nav-inner">
        <div class="brand">PluginHub</div>
        <div class="nav-links hidden md:flex">
            <a href="https://tcl-iffalcon.github.io/wiki/">Ana Sayfa</a>
            <a href="https://tcl-iffalcon.github.io/wiki/uygulamalar.html">TV APK</a>
            <a href="https://tcl-iffalcon.github.io/wiki/mobil.html">Telefon APK</a>
            <a href="https://t.me/tcltvturk1">Telegram</a>
        </div>
        <div class="flex gap-2 items-center">
            <button onclick="toggleFavFilter()" id="favFilterBtn" class="nav-btn hidden md:flex">
                <span>â™¡</span> Favoriler
            </button>
            <button onclick="toggleTheme()" class="nav-btn" id="themeBtn">ğŸŒ™</button>
            <button onclick="toggleMenu()" class="nav-btn md:hidden">â˜°</button>
        </div>
    </div>
    <div id="mobileMenu" class="md:hidden border-t border-white/5 py-4 px-2">
        <div class="flex flex-col gap-2">
            <a href="https://tcl-iffalcon.github.io/wiki/" class="nav-links" style="display:block;padding:8px 12px;border-radius:8px;color:var(--muted);text-decoration:none;font-size:14px;">Ana Sayfa</a>
            <a href="https://tcl-iffalcon.github.io/wiki/uygulamalar.html" style="display:block;padding:8px 12px;border-radius:8px;color:var(--muted);text-decoration:none;font-size:14px;">TV APK</a>
            <a href="https://tcl-iffalcon.github.io/wiki/mobil.html" style="display:block;padding:8px 12px;border-radius:8px;color:var(--muted);text-decoration:none;font-size:14px;">Telefon APK</a>
            <a href="https://t.me/tcltvturk1" style="display:block;padding:8px 12px;border-radius:8px;color:var(--muted);text-decoration:none;font-size:14px;">Telegram</a>
            <div class="flex gap-2 pt-2">
                <button onclick="toggleFavFilter()" id="favFilterBtnMobile" class="nav-btn">â™¡ Favoriler</button>
            </div>
        </div>
    </div>
</nav>

<main>
    <!-- HERO -->
    <div class="hero">
        <div class="hero-eyebrow">ğŸ”Œ Eklenti Ekosistemi</div>
        <h1>TÃ¼m <span>Eklentiler</span><br>Tek Yerde</h1>
        <p>Stremio, Nuvio, CloudStream ve daha fazlasÄ± iÃ§in eklentiler ve repolar.</p>
        <div class="stats-bar" id="statsBar">
            <div class="stat"><div class="stat-num" id="statTotal">â€”</div><div class="stat-label">Eklenti</div></div>
            <div class="stat"><div class="stat-num" id="statNew">â€”</div><div class="stat-label">Bu Hafta Yeni</div></div>
            <div class="stat"><div class="stat-num" id="statApps">â€”</div><div class="stat-label">Uygulama</div></div>
        </div>
    </div>

    <!-- LAST SEEN -->
    <div class="last-seen-section" id="lastSeenSection" style="display:none">
        <div class="last-seen-title">ğŸ• Son GÃ¶rÃ¼ntÃ¼lenenler</div>
        <div class="last-seen-chips" id="lastSeenChips"></div>
    </div>

    <!-- FILTERS -->
    <div class="filter-bar">
        <div class="filter-inner">
            <div class="filter-group">
                <label>Uygulama</label>
                <select id="appSelect" onchange="filterData()">
                    <option value="all">TÃ¼m Uygulamalar</option>
                    <option value="Stremio">Stremio</option>
                    <option value="Nuvio">Nuvio</option>
                    <option value="CloudStream">CloudStream</option>
                    <option value="DiÄŸer">DiÄŸer</option>
                </select>
            </div>
            <div class="filter-group">
                <label>Kategori</label>
                <select id="typeSelect" onchange="filterData()">
                    <option value="all">TÃ¼m Kategoriler</option>
                    <option value="4K">4K</option>
                    <option value="Film">Film & Dizi</option>
                    <option value="Dublaj">Dublaj</option>
                    <option value="AltyazÄ±">AltyazÄ±</option>
                    <option value="Spor">Spor</option>
                    <option value="Ã‡izgi Film">Ã‡izgi Film</option>
                    <option value="Katalog">Katalog</option>
                    <option value="Repo">Plugins</option>
                </select>
            </div>
            <div class="filter-group">
                <label>Arama</label>
                <input type="text" id="searchInput" oninput="filterData()" placeholder="ğŸ” Eklenti veya iÃ§erik ara..." autocomplete="off">
            </div>
        </div>
    </div>

    <!-- CATEGORY TABS -->
    <div class="category-tabs" id="categoryTabs"></div>

        <div class="result-bar">
        <span id="resultCount"></span>
        <div class="flex gap-8" style="gap:8px">
            <button onclick="shareCurrentFilter()" class="nav-btn" style="font-size:11px">ğŸ”— PaylaÅŸ</button>
        </div>
    </div>

    <!-- GRID -->
    <div class="grid-wrap">
        <div id="skeletonGrid" class="cards-grid"></div>
        <div id="resultsGrid" class="cards-grid"></div>
        <div id="emptyState">
            <div style="font-size:48px;margin-bottom:16px">ğŸ”</div>
            <p style="font-weight:700;font-size:16px;color:var(--text)">SonuÃ§ bulunamadÄ±</p>
            <p style="font-size:14px;margin-top:6px">Filtrelerinizi deÄŸiÅŸtirmeyi deneyin.</p>
        </div>
    </div>
</main>



<!-- MODAL -->
<div id="modal-overlay" onclick="closeModalOnBackdrop(event)">
    <div id="modal-box" class="p-6 md:p-8">
        <div class="flex justify-between items-start mb-5">
            <div>
                <div class="flex gap-2 mb-2 flex-wrap" id="modal-badges"></div>
                <h2 id="modal-title" style="font-size:22px;font-weight:800;letter-spacing:-0.5px"></h2>
                <div id="modal-date" style="font-size:12px;color:var(--muted);margin-top:4px"></div>
            </div>
            <button onclick="closeModal()" style="background:none;border:none;color:var(--muted);cursor:pointer;font-size:20px;padding:4px;transition:color 0.2s" onmouseover="this.style.color='var(--text)'" onmouseout="this.style.color='var(--muted)'">âœ•</button>
        </div>

        <!-- RATING IN MODAL -->
        <div id="modal-rating-section" class="mb-5">
            <p style="font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:1.5px;color:var(--muted);margin-bottom:8px">PuanÄ±nÄ±z</p>
            <div class="stars" id="modal-stars"></div>
        </div>

        <!-- URL -->
        <div id="modal-url-section" class="hidden mb-5">
            <p style="font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:1.5px;color:var(--muted);margin-bottom:8px">BaÄŸlantÄ±</p>
            <div id="modal-url" class="url-mono" style="margin-top:0"></div>
            <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:10px">
                <button id="modal-copy-btn" class="btn btn-secondary">Kopyala</button>
                <a id="modal-goto-btn" href="#" target="_blank" class="btn btn-primary">Siteye Git â†—</a>
            </div>
        </div>

        <!-- CODE -->
        <div id="modal-code-section" class="hidden mb-5">
            <p style="font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:1.5px;color:var(--muted);margin-bottom:8px">Downloader Kodu</p>
            <div style="display:flex;align-items:center;gap:12px">
                <div id="modal-code" style="font-size:28px;font-weight:800;color:#60a5fa;background:var(--surface2);padding:12px 20px;border-radius:12px;border:1px solid var(--border)"></div>
                <button id="modal-code-copy-btn" class="btn btn-secondary" style="flex:none;padding:12px 16px">Kopyala</button>
            </div>
        </div>

        <!-- INSTALL GUIDE -->
        <div id="modal-guide"></div>
    </div>
</div>



<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// DATA & STATE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let plugins = [];
let favorites = JSON.parse(localStorage.getItem('ph_favorites') || '[]');
let ratings   = JSON.parse(localStorage.getItem('ph_ratings')   || '{}');
let lastSeen  = JSON.parse(localStorage.getItem('ph_lastseen')  || '[]');
let showFavsOnly = false;
let compareMode = false; // removed
let isLight = localStorage.getItem('ph_theme') === 'light';

if (isLight) { document.body.classList.add('light'); document.getElementById('themeBtn').textContent = 'â˜€ï¸'; }

// â”€â”€ INSTALL GUIDES â”€â”€
const installGuides = {
    stremio: {
        title: "Stremio'ya NasÄ±l Kurulur?",
        steps: [
            { icon: "ğŸ“‹", text: "YukarÄ±daki <strong>Kopyala</strong> butonuna tÄ±klayarak manifest URL'yi kopyalayÄ±n." },
            { icon: "ğŸŒ", text: "Stremio Web (<em>web.stremio.com</em>) veya masaÃ¼stÃ¼ uygulamasÄ±nÄ± aÃ§Ä±n." },
            { icon: "ğŸ”—", text: "Sol menÃ¼den <strong>Eklentiler</strong> simgesine tÄ±klayÄ±n." },
            { icon: "â•", text: "KopyaladÄ±ÄŸÄ±nÄ±z URL'yi eklenti ekleme alanÄ±na yapÄ±ÅŸtÄ±rÄ±n." },
            { icon: "âœ…", text: "AÃ§Ä±lan pencerede <strong>Install</strong> butonuna basÄ±n." }
        ]
    },
    nuvio: {
        title: "Nuvio'ya NasÄ±l Kurulur?",
        steps: [
            { icon: "ğŸ“‹", text: "YukarÄ±daki <strong>Kopyala</strong> butonuna tÄ±klayarak URL'yi kopyalayÄ±n." },
            { icon: "ğŸ“º", text: "Nuvio uygulamasÄ±nÄ± aÃ§Ä±n ve <strong>Addons</strong> bÃ¶lÃ¼mÃ¼ne gidin." },
            { icon: "ğŸ“²", text: "<strong>Manage from phone</strong> butonuna tÄ±klayÄ±n." },
            { icon: "ğŸ“·", text: "Ã‡Ä±kan QR kodu telefonunuzda okutun." },
            { icon: "ğŸ”—", text: "AÃ§Ä±lan web sitesinde Add sekmesine tÄ±klayÄ±n, URL'yi yapÄ±ÅŸtÄ±rÄ±n." },
            { icon: "âœ…", text: "Save Changes'e basÄ±n ve TV'ye gelen bildirimi onaylayÄ±n." }
        ]
    },
    cloudstream: {
        title: "CloudStream'e Repo NasÄ±l Eklenir?",
        steps: [
            { icon: "ğŸ“±", text: "CloudStream uygulamasÄ±nÄ± aÃ§Ä±n." },
            { icon: "âš™ï¸", text: "<strong>Ayarlar â†’ Eklentiler</strong> bÃ¶lÃ¼mÃ¼ne gidin." },
            { icon: "ğŸ”—", text: "\"<strong>Repo Ekle</strong>\" seÃ§eneÄŸine dokunun." },
            { icon: "âœï¸", text: "Repo adÄ±nÄ± yazÄ±n veya tam URL'yi girin." },
            { icon: "â¬‡ï¸", text: "Ä°stediÄŸiniz eklentiyi seÃ§ip <strong>Ä°ndir</strong>'e basÄ±n." }
        ]
    },
    downloader: {
        title: "Downloader ile APK Kurulumu",
        steps: [
            { icon: "ğŸ“º", text: "TV'nizde <strong>Downloader</strong> uygulamasÄ±nÄ± aÃ§Ä±n." },
            { icon: "ğŸ”¢", text: "YukarÄ±daki 7 haneli <strong>kodu</strong> not alÄ±n." },
            { icon: "âœï¸", text: "Downloader'da URL/kod alanÄ±na girin." },
            { icon: "â¬‡ï¸", text: "<strong>Go</strong>'ya basÄ±n; APK otomatik indirilir." },
            { icon: "âœ…", text: "Ä°ndirme sonrasÄ± <strong>YÃ¼kle</strong>'ye basÄ±n." }
        ]
    },
    link: {
        title: "Bu Uygulamaya EriÅŸim",
        steps: [
            { icon: "ğŸ”—", text: "YukarÄ±daki <strong>Siteye Git</strong> butonuna tÄ±klayÄ±n." },
            { icon: "ğŸ“¥", text: "Anasayfadan uygulamayÄ± indirin." },
            { icon: "âœ…", text: "CihazÄ±nÄ±za gÃ¶re kurulum talimatlarÄ±nÄ± uygulayÄ±n." }
        ]
    }
};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// HELPERS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function pluginKey(p) { return `${p.app}|${p.name}|${p.type}`; }
function isFav(p) { return favorites.includes(pluginKey(p)); }

function showToast(msg, color='#1e293b') {
    const t = document.getElementById('toast');
    t.textContent = msg;
    t.style.background = color;
    t.classList.add('show');
    clearTimeout(window._tt);
    window._tt = setTimeout(() => t.classList.remove('show'), 2200);
}

function copyText(text) {
    navigator.clipboard.writeText(text).then(() => showToast('âœ“ KopyalandÄ±!', '#10b981'));
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// THEME
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function toggleTheme() {
    isLight = !isLight;
    document.body.classList.toggle('light', isLight);
    localStorage.setItem('ph_theme', isLight ? 'light' : 'dark');
    document.getElementById('themeBtn').textContent = isLight ? 'â˜€ï¸' : 'ğŸŒ™';
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// MOBILE MENU
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function toggleMenu() {
    document.getElementById('mobileMenu').classList.toggle('open');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// FAVORITES
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function toggleFav(key, btn) {
    const idx = favorites.indexOf(key);
    if (idx === -1) { favorites.push(key); showToast('â¤ Favorilere eklendi'); }
    else { favorites.splice(idx, 1); showToast('â™¡ Favorilerden Ã§Ä±karÄ±ldÄ±'); }
    localStorage.setItem('ph_favorites', JSON.stringify(favorites));
    btn.classList.toggle('active', favorites.includes(key));
    btn.textContent = favorites.includes(key) ? 'â¤' : 'â™¡';
    if (showFavsOnly) filterData();
}

function toggleFavFilter() {
    showFavsOnly = !showFavsOnly;
    const btns = ['favFilterBtn','favFilterBtnMobile'].map(id => document.getElementById(id)).filter(Boolean);
    btns.forEach(b => {
        b.classList.toggle('active', showFavsOnly);
        b.innerHTML = showFavsOnly ? '<span>â¤</span> Favoriler' : '<span>â™¡</span> Favoriler';
    });
    filterData();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// RATINGS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function setRating(key, val) {
    ratings[key] = val;
    localStorage.setItem('ph_ratings', JSON.stringify(ratings));
    showToast(`â­ ${val}/5 puan verildi`);
}

function renderStars(key, container) {
    const current = ratings[key] || 0;
    container.innerHTML = '';
    for (let i = 1; i <= 5; i++) {
        const s = document.createElement('span');
        s.className = 'star' + (i <= current ? ' filled' : '');
        s.textContent = 'â˜…';
        s.onclick = () => { setRating(key, i); renderStars(key, container); };
        s.onmouseover = () => { container.querySelectorAll('.star').forEach((el,j) => el.classList.toggle('filled', j < i)); };
        s.onmouseout  = () => { container.querySelectorAll('.star').forEach((el,j) => el.classList.toggle('filled', j < ratings[key]||0)); };
        container.appendChild(s);
    }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// LAST SEEN
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function addLastSeen(item) {
    const key = pluginKey(item);
    lastSeen = lastSeen.filter(k => k !== key);
    lastSeen.unshift(key);
    lastSeen = lastSeen.slice(0, 5);
    localStorage.setItem('ph_lastseen', JSON.stringify(lastSeen));
    renderLastSeen();
}

function renderLastSeen() {
    const section = document.getElementById('lastSeenSection');
    const chips   = document.getElementById('lastSeenChips');
    const items   = lastSeen.map(k => plugins.find(p => pluginKey(p) === k)).filter(Boolean);
    if (!items.length) { section.style.display = 'none'; return; }
    section.style.display = 'block';
    chips.innerHTML = items.map(p => `
        <div class="seen-chip" onclick='openModal(${JSON.stringify(p).replace(/'/g,"&#39;")})'>${p.name}</div>
    `).join('');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// STATUS BADGE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function statusBadge(status) {
    if (!status) return '';
    const map = { 'aktif': ['badge-status-ok','âœ… Aktif'], 'kararsÄ±z': ['badge-status-warn','âš ï¸ KararsÄ±z'], 'Ã§alÄ±ÅŸmÄ±yor': ['badge-status-err','âŒ Ã‡alÄ±ÅŸmÄ±yor'] };
    const [cls, label] = map[status?.toLowerCase()] || ['badge-status-ok','âœ… Aktif'];
    return `<span class="badge ${cls}">${label}</span>`;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// URL PARAMS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function applyURLParams() {
    const p = new URLSearchParams(window.location.search);
    if (p.get('app'))  document.getElementById('appSelect').value  = p.get('app');
    if (p.get('type')) document.getElementById('typeSelect').value = p.get('type');
    if (p.get('q'))    document.getElementById('searchInput').value = p.get('q');
}

function updateURL(app, type, q) {
    const p = new URLSearchParams();
    if (app !== 'all') p.set('app', app);
    if (type !== 'all') p.set('type', type);
    if (q) p.set('q', q);
    history.replaceState({}, '', window.location.pathname + (p.toString() ? '?' + p.toString() : ''));
}

function shareCurrentFilter() {
    navigator.clipboard.writeText(window.location.href).then(() => showToast('ğŸ”— Link kopyalandÄ±!', '#3b82f6'));
}

// compare removed

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// CATEGORY TABS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function buildCategoryTabs() {
    const types = ['all', ...new Set(plugins.map(p => p.type))];
    const container = document.getElementById('categoryTabs');
    container.innerHTML = types.map(t => `
        <button class="tab-pill ${t==='all'?'active':''}" onclick="setTypeTab('${t}')" data-type="${t}">
            ${t === 'all' ? 'TÃ¼mÃ¼' : t}
        </button>
    `).join('');
}

function setTypeTab(type) {
    document.getElementById('typeSelect').value = type === 'all' ? 'all' : type;
    document.querySelectorAll('.tab-pill').forEach(b => b.classList.toggle('active', b.dataset.type === type));
    filterData();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SKELETON
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function showSkeleton() {
    const g = document.getElementById('skeletonGrid');
    g.innerHTML = Array(6).fill(0).map(() => `
        <div class="skeleton-card">
            <div style="display:flex;gap:8px;margin-bottom:16px">
                <div class="skel-line" style="width:60px;height:20px"></div>
                <div class="skel-line" style="width:60px;height:20px"></div>
            </div>
            <div class="skel-line" style="width:70%"></div>
            <div class="skel-line" style="width:90%;margin-top:8px"></div>
            <div class="skel-line" style="width:50%;margin-top:24px"></div>
        </div>
    `).join('');
}

function hideSkeleton() {
    document.getElementById('skeletonGrid').innerHTML = '';
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// FILTER
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function filterData() {
    const app  = document.getElementById('appSelect').value;
    const type = document.getElementById('typeSelect').value;
    const q    = document.getElementById('searchInput').value.toLowerCase().trim();
    updateURL(app, type, q);

    // Sync tabs
    document.querySelectorAll('.tab-pill').forEach(b => {
        const t = b.dataset.type;
        b.classList.toggle('active', t === (type === 'all' ? 'all' : type));
    });

    const filtered = plugins.filter(p => {
        const matchApp  = app  === 'all' || p.app  === app;
        const matchType = type === 'all' || p.type === type;
        const matchQ    = !q || p.name.toLowerCase().includes(q) || p.desc?.toLowerCase().includes(q);
        const matchFav  = !showFavsOnly || isFav(p);
        return matchApp && matchType && matchQ && matchFav;
    });

    renderCards(filtered);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// RENDER CARDS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderCards(data) {
    const grid   = document.getElementById('resultsGrid');
    const empty  = document.getElementById('emptyState');
    const count  = document.getElementById('resultCount');
    grid.innerHTML = '';
    count.textContent = data.length > 0 ? `${data.length} eklenti bulundu` : '';

    if (!data.length) { empty.style.display = 'block'; return; }
    empty.style.display = 'none';

    data.forEach((item, i) => {
        const urlMatch  = item.desc?.match(/(https?:\/\/[^\s]+)/g);
        const url       = urlMatch ? urlMatch[0] : null;
        const codeMatch = item.desc?.match(/Downloader Kodu:\s*(\d+)/);
        const code      = codeMatch ? codeMatch[1] : null;
        const key       = pluginKey(item);
        const favActive = isFav(item);
        const starCount = ratings[key] || 0;
        const delay     = Math.min(i * 35, 350);

        const card = document.createElement('div');
        card.className = 'plugin-card';
        card.style.animationDelay = delay + 'ms';
        card.innerHTML = `
            <div style="display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:12px">
                <div style="display:flex;gap:6px;flex-wrap:wrap">
                    <span class="badge badge-app">${item.app}</span>
                    <span class="badge badge-type">${item.type}</span>
                    ${item.isNew ? '<span class="badge badge-new">Yeni</span>' : ''}
                    ${statusBadge(item.status)}
                </div>
                <button class="fav-btn ${favActive ? 'active' : ''}"
                    onclick="event.stopPropagation(); toggleFav('${key}', this)">
                    ${favActive ? 'â¤' : 'â™¡'}
                </button>
            </div>

            <h3 style="font-size:16px;font-weight:700;margin-bottom:6px;line-height:1.3">${item.name}</h3>

            ${item.updatedAt ? `<div style="font-size:11px;color:var(--muted);margin-bottom:8px">ğŸ“… ${item.updatedAt}</div>` : ''}

            <div style="flex:1;margin-bottom:12px">
                ${url
                    ? `<div class="url-mono">${url}</div>`
                    : (code
                        ? `<div style="font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:1.5px;color:var(--muted);margin-bottom:6px">Downloader Kodu</div><span style="font-size:26px;font-weight:800;color:#60a5fa">${code}</span>`
                        : `<p style="font-size:13px;color:var(--muted);line-height:1.5">${(item.desc||'').replace(/(https?:\/\/[^\s]+)/g,'').trim().slice(0,80)}</p>`
                    )
                }
            </div>

            <!-- STARS -->
            <div style="display:flex;gap:3px;margin-bottom:12px" class="stars" id="stars-${key.replace(/[|]/g,'-')}">
                ${Array.from({length:5},(_,j)=>`<span class="star ${j<starCount?'filled':''}" onclick="event.stopPropagation();setRating('${key}',${j+1});rerenderCardStars('${key}')">â˜…</span>`).join('')}
            </div>

            <div class="card-actions" onclick="event.stopPropagation()">
                ${url ? `
                    <button onclick="copyText('${url}')" class="btn btn-secondary">Kopyala</button>
                    <a href="${url}" target="_blank" class="btn btn-primary">Git â†—</a>
                ` : (code ? `
                    <button onclick="copyText('${code}')" class="btn btn-secondary">Kodu Kopyala</button>
                    <button onclick='openModal(${JSON.stringify(item).replace(/'/g,"&#39;")})' class="btn btn-primary">NasÄ±l YÃ¼klenir?</button>
                ` : `
                    <button onclick='openModal(${JSON.stringify(item).replace(/'/g,"&#39;")})' class="btn btn-primary" style="flex:2">Detaylar</button>
                `)}
            </div>
        `;
        card.addEventListener('click', () => {
            openModal(item);
        });
        grid.appendChild(card);
    });
}

function rerenderCardStars(key) {
    const el = document.getElementById('stars-' + key.replace(/[|]/g,'-'));
    if (!el) return;
    const count = ratings[key] || 0;
    el.querySelectorAll('.star').forEach((s,j) => s.classList.toggle('filled', j < count));
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// MODAL
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function openModal(item) {
    addLastSeen(item);
    const urlMatch  = item.desc?.match(/(https?:\/\/[^\s]+)/g);
    const url       = urlMatch ? urlMatch[0] : null;
    const codeMatch = item.desc?.match(/Downloader Kodu:\s*(\d+)/);
    const code      = codeMatch ? codeMatch[1] : null;
    const key       = pluginKey(item);

    document.getElementById('modal-badges').innerHTML = `
        <span class="badge badge-app">${item.app}</span>
        <span class="badge badge-type">${item.type}</span>
        ${item.isNew ? '<span class="badge badge-new">Yeni</span>' : ''}
        ${statusBadge(item.status)}
    `;
    document.getElementById('modal-title').textContent = item.name;
    document.getElementById('modal-date').textContent  = item.updatedAt ? `ğŸ“… Son gÃ¼ncelleme: ${item.updatedAt}` : '';

    // Stars
    const starsEl = document.getElementById('modal-stars');
    renderStars(key, starsEl);

    // URL
    const urlSec = document.getElementById('modal-url-section');
    if (url) {
        urlSec.classList.remove('hidden');
        document.getElementById('modal-url').textContent = url;
        document.getElementById('modal-copy-btn').onclick = () => copyText(url);
        document.getElementById('modal-goto-btn').href = url;
    } else urlSec.classList.add('hidden');

    // Code
    const codeSec = document.getElementById('modal-code-section');
    if (code) {
        codeSec.classList.remove('hidden');
        document.getElementById('modal-code').textContent = code;
        document.getElementById('modal-code-copy-btn').onclick = () => copyText(code);
    } else codeSec.classList.add('hidden');

    // Guide
    const guide  = installGuides[item.installGuide];
    const guideEl = document.getElementById('modal-guide');
    guideEl.innerHTML = guide ? `
        <div style="border-top:1px solid var(--border);padding-top:20px;margin-top:4px">
            <p style="font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:1.5px;color:var(--muted);margin-bottom:16px">${guide.title}</p>
            <div style="display:flex;flex-direction:column;gap:10px">
                ${guide.steps.map((s,i) => `
                    <div style="display:flex;gap:12px;align-items:flex-start">
                        <div class="step-num">${i+1}</div>
                        <div style="font-size:13px;color:var(--muted);line-height:1.6;padding-top:3px">${s.icon} ${s.text}</div>
                    </div>
                `).join('')}
            </div>
        </div>
    ` : '';

    document.getElementById('modal-overlay').classList.add('open');
    document.body.style.overflow = 'hidden';
}

function closeModal() {
    document.getElementById('modal-overlay').classList.remove('open');
    document.body.style.overflow = '';
}

function closeModalOnBackdrop(e) {
    if (e.target === document.getElementById('modal-overlay')) closeModal();
}

document.addEventListener('keydown', e => { if (e.key === 'Escape') closeModal(); });

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SEARCH HISTORY (input suggestion)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let searchHistory = JSON.parse(localStorage.getItem('ph_searchhistory') || '[]');
const searchInput = document.getElementById('searchInput');
searchInput.addEventListener('blur', () => {
    const v = searchInput.value.trim();
    if (v && !searchHistory.includes(v)) {
        searchHistory.unshift(v);
        searchHistory = searchHistory.slice(0, 8);
        localStorage.setItem('ph_searchhistory', JSON.stringify(searchHistory));
    }
});

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// STATS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function updateStats() {
    document.getElementById('statTotal').textContent = plugins.length;
    document.getElementById('statNew').textContent = plugins.filter(p => p.isNew).length;
    document.getElementById('statApps').textContent = new Set(plugins.map(p => p.app)).size;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// PROGRESS BAR
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function progressStart() {
    const bar = document.getElementById('progress-bar');
    bar.style.width = '0%';
    bar.style.opacity = '1';
    setTimeout(() => bar.style.width = '70%', 50);
}
function progressDone() {
    const bar = document.getElementById('progress-bar');
    bar.style.width = '100%';
    setTimeout(() => { bar.style.opacity = '0'; bar.style.width = '0%'; }, 400);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// INIT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
applyURLParams();
showSkeleton();
progressStart();

fetch('plugins.json')
    .then(r => r.json())
    .then(data => {
        plugins = data;
        hideSkeleton();
        progressDone();
        updateStats();
        buildCategoryTabs();
        renderLastSeen();
        filterData();
    })
    .catch(() => {
        hideSkeleton();
        progressDone();
        document.getElementById('emptyState').style.display = 'block';
        document.getElementById('emptyState').innerHTML = `
            <div style="font-size:48px;margin-bottom:16px">âš ï¸</div>
            <p style="font-weight:700;font-size:16px;color:var(--text)">plugins.json yÃ¼klenemedi</p>
            <p style="font-size:14px;margin-top:6px">DosyanÄ±n aynÄ± dizinde olduÄŸundan emin olun.</p>
        `;
    });
</script>
</body>
</html>
